# 2장 생성자, 소멸자 및 대입연산자

## 항목 5: C++가 은근슬쩍 만들어 호출해 버리는 함수들에 촉각을 세우자.
- C++ 빈 클래스에는 무조건 `생성자`, `소멸자`, `복사 생성자`, `복사 대입 연산자`가 있다.
    - ```cpp
        class Empty{
            public:
            Empty();
            Empty(const Empty& rhs);
            ~Empty();
            Empty& operator=(const Empty& rhs);
        }
        ```
- 근데 매개변수를 받는 생성자가 존재하면 기본생성자는 만들지 않는다.
    - 자바에서는 만들던데, c++은 아닌가보다.
    - 기본 생성자를 호줄해도 생성안하는 듯
- 복사 생성자에서
    - private 멤버가 String인 경우, 자연수럽게 String의 복사 생성자도 출력..!!
- 기본 복사 대입 연산자는 컴파일러에서 "문법적으로도 맞아야" 생성함.
    - private 멤버 타입이 `참조자` 이거나 `상수`이면 기본 복사 대입으로 이뤄질 수 없다.

## 항목 6: 컴파일러가 만들어낸 함수가 필요 없으면 확실히 이들의 사용을 금해 버리자.
- 컴파일러가 만든 `기본 복사 생성자` 혹은 `기본 복사 대입 연산자`가 호출되지 않게 하려면 private으로 선언해버리면 된다.
    - ```cpp
        private:
            HomeForSale(const HomeForSale&);
            HomeForSale& operator=(const HomeForSale&);
        ```
- **선언에는 매개변수 이름 안적어줘도됨!!!!!!!!!!!!!!!!**
- 링크 에러가 뜰 수 있기에, 컴파일 에러로 바꾸고 싶다면
    - Uncopyable 클래스를 만들고 상속시키면 됨.
    - boost 라이브러리 noncopyable 써도됨.
    - 근데 싱글톤이면 안되려나..? 나중에 알아보자.

## 항목 7: 다형성을 가진 기본 클래스에는 소멸자를 반드시 가상 소멸자로 선언하자
- 팩토리함수?
- 자식 클래스의 객체를 부모 포인터로 가리킨 후 소멸 시키면 오류 발생할 수 있어
    - 따라서 항상 부모 클래스 소멸자는 virtual로 선언하자.
- 가상함수를 하나라도 가진 클래스는 무조건 가상 소멸자도 가져야한다. (왜 그럴까?)
- 객체 크기는 private 멤버 변수를 합친거의 크기와 같다.
    - 하지만 가상함수를 하나라도 갖게된다면, 별도의 자료구조인 vptr을 가지므로 생각해야한다.
    - 어떤 객체의 가상함수를 호출하면 그 vtbl(가상함수 테이블, vptr 배열 구조)의 vptr을 살펴보게된다.
    - 32비트 환경에 가상함수가 여러개여도 객체에는 vptr 크기 4바이트만이 추가된다.
- std::string 혹은 stl 컨테이너 타입 모두 가상소멸자가 없다.
    - 따라서 나만의 클래스로 만들생각 ㄴ
<br><br/>
- 어떤 클래스를 추상클래스로 만들고싶은데 마땅히 지정할 순수 가상함수 없으면 소멸자를 순수가상함수로 지정하자.
    - 하지만 선언만 하면안되고, 내용도 채워넣어야 해당 클래스를 상속받는 소멸자에서 링크에러가 안난다. (자식 객체에서 소멸자 하나씩 위로 올라가며 호출하는데 내용없다고 에러나기 때문)
- 기본 클래스의 가상 소멸자를 쥐어 주자는 규칙은 `다형성`에 의해서만 적용된다.
    - 왜냐면, 부모 클래스 포인터로 자식 객체들을 조작할 수 있는 상황이기 때문에.
- 기본 클래스로 설계되지 않았거나 다형성을 갖도록 설계되지 않은 클래스에는 가상 소멸자를 선언하지 말아야 한다.

## 항목 8: 예외가 소멸자를 떠나지 못하도록 붙들어 놓자
## 항목 9: 객체 생성 및 소멸 과정 중에는 절대로 가상 함수를 호출하지 말자.
## 항목 10: 대입 연산자는 *this의 참조자를 반환하게 하자
## 항목 11: operator==에서는 자기대입에 대한 처리가 빠지지 않도록 하자.
## 항목 12: 객체의 모든 부분을 빠짐없이 복사하자.